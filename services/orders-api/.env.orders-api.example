# Service: orders-api (NO secretos)

# --- App ---
APP_NAME=orders-api
ENVIRONMENT=local
LOG_LEVEL=INFO
PYTHONUNBUFFERED=1

# CHANGE: versión declarativa (útil para health/observabilidad)
APP_VERSION=0.1.0

# --- CORS (Cross-Origin Resource Sharing) ---
# CHANGE: allowlist por CSV (enterprise: explícito)
CORS_ALLOWED_ORIGINS=http://localhost:5173
# CHANGE: Authorization Bearer no necesita cookies, mantenemos false por defecto
CORS_ALLOW_CREDENTIALS=false

# --- DB (password en .env.orders-api.secrets) ---
DB_HOST=orders-db
DB_PORT=5432
DB_NAME=orders_db
DB_USER=orders_app

# --- OIDC (OpenID Connect) / JWT (JSON Web Token) ---
KEYCLOAK_PUBLIC_BASE_URL=http://keycloak.localtest.me:8080
KEYCLOAK_REALM=asrp
KEYCLOAK_CLIENT_ID=asrp-orders

# Discovery completo (si tu código usa discovery URL completa)
OIDC_DISCOVERY_URL=http://keycloak.localtest.me:8080/realms/asrp/.well-known/openid-configuration

# Issuer esperado (debe coincidir con el iss del token)
OIDC_ISSUER_EXPECTED=http://keycloak.localtest.me:8080/realms/asrp

# CHANGE: audiencia esperada (aud) para orders-api
OIDC_AUDIENCE=asrp-orders

# CHANGE: tolerancia de reloj (segundos)
OIDC_LEEWAY_SECONDS=10

# CHANGE: algoritmos permitidos (CSV)
OIDC_ALGORITHMS=RS256

# CHANGE: cache/timeout OIDC (enterprise)
OIDC_DISCOVERY_CACHE_SECONDS=300
OIDC_JWKS_CACHE_SECONDS=300
OIDC_HTTP_TIMEOUT_SECONDS=3.0

# CHANGE: dónde buscar roles (resource_access[RBAC_CLIENT_ID].roles)
RBAC_CLIENT_ID=asrp-orders
